/*! lyria - v0.2.0 - 23-07-2013 */
define("lyria/achievement",function(){var e=0,t=function(){var t=function(t){if(t.name){this.name=t.name,e++,this.id=e,null!=t.description&&(this.description=t.description),null!=t.icon&&(this.icon=t.icon),this.progress={},this.progress.max=1;var n=0,r=this;Object.defineProperty(this.progress,"current",{get:function(){return n},set:function(e){n=e,r.progress.max===progressCount&&r.unlock()},enumarable:!0,configurable:!0}),this.unlocked=!1}};return t.prototype.lock=function(){this.unlocked=!1},t.prototype.unlock=function(){this.unlocked=!0},t.prototype.toJSON=function(){var e={};for(var t in this)Object.hasOwnProperty.call(this,t)||(e[t]=this[t]);return e},t.prototype.toString=function(){return JSON.stringify(this.toJSON())},t}();return t}),define("lyria/achievement/manager",["root","jquery","lyria/achievement"],function(e,t,n){var r={},i={add:function(e){e instanceof n&&(r[e.name]=e)},remove:function(e){Object.hasOwnProperty.call(r,e)&&delete r[e]},list:function(){},show:function(){}};return i}),define("lyria/achievements",["root","jquery"],function(e,t){"use strict";var n=function(){var n,r={},i=function(t){n=t,e.localStorage&&e.localStorage[n]&&(r=JSON.parse(e.localStorage[n]))},o=function(e,t,n){r[e]={active:!1},t!==void 0&&(r[e].description=t),n!==void 0&&(r[e].icon=n)},a=function(){return Object.keys(r).length},s=function(){var e=0;for(var t in r)r[t].active&&e++;return e},c=function(){var e="";for(var t in r)e+=r[t].active?'<div class="ach_box unlocked"><span class="ach_unlocked">'+t+'</span><br /><span class="ach_details">'+r[t].description+"</span></div><br /><br />":'<div class="ach_box locked"><span class="ach_locked">'+t+'</span><br /><span class="ach_details">'+r[t].description+"</span></div><br /><br />";return e},u=function(i){"undefined"===r[i]&&o(i),r[i].active||(r[i].icon||t(".status.achievement").css("background-image","url("+r[i].icon+")"),t(".achievement .text").html(i),t(".status.achievement").css({opacity:0}).animate({opacity:1,bottom:"8px"},750).delay(2500).animate({opacity:0,bottom:"-80px"},750),r[i].active=!0),e.localStorage&&(e.localStorage[n]=JSON.stringify(r))};return{initialize:i,getCount:a,getUnlockedCount:s,list:c,register:o,show:u}}();return n}),define("lyria/audio",["root","jquery"],function(e,t){"use strict";var n=function(){var e=!1,n={},r=function(e,r){if(r&&"object"==typeof r){var i=document.createElement("audio");n[e]=r,t(i).attr("id",e).attr("preload","auto").append('<source src="'+r.filepath+'" />'),t("body").append(i),r.play&&this.play(e)}},i=function(e){e&&"string"==typeof fileObj&&(t("#"+e).remove(),window.log("Lyria.audio.removeAudioElement: "+e+" removed"))},o=function(r){n[r],t("#"+r).one("ended",{audioManager:this},function(e){window.chrome?t(this).load():t(this).currentTime=0;var n=t(this).attr("id"),r=e.data.audioManager.getSound(n);r.playAfter&&t("#"+r.playAfter).length>0&&e.data.audioManager.play(r.playAfter),r.loop&&e.data.audioManager.play(t(this).attr("id"))}),t("#"+r)[0].play(),e&&(t("#"+r)[0].volume=0)},a=function(e){return n[e]},s=function(e){t("#"+e).length>0?t("#"+e)[0].pause():window.log("error","Lyria.Audio.pause: cant finde element "+e+" to pause")},c=function(e){t("#"+e).length>0&&t("#"+e)[0]&&t("#"+e)[0].pause&&(t("#"+e)[0].pause(),t("#"+e)[0].currentTime=0)},u=function(e){return t("#"+e)[0].duration},l=function(e,n){return t("#"+e).length>0?"number"!=typeof n?t("#"+e)[0].volume:(t("#"+e)[0].volume=n,void 0):0},f=function(e,n){return"number"!=typeof n?t("#"+e)[0].currentTime:(t("#"+e)[0].currentTime=n,void 0)},p=function(e,t){switch(e){case"duration":case"length":return u();case"position":case"pos":if(t===void 0)return f();f(t);break;case"volume":if(t===void 0)return l();l(t)}},h=function(r){e=r;for(var i in n)n.hasOwnProperty(i)&&t("#"+i).length>0&&(t("#"+i)[0].volume=r?0:1)};return{addAudioElement:r,removeAudioElement:i,play:o,getSound:a,pause:s,stop:c,muteSounds:h,getLength:u,volume:l,pos:f,attr:p}};return n}),define("lyria/audio/manager",function(){var e={};return e}),define("lyria/component",["mixin","lyria/eventmap"],function(e,t){return function(){function n(r){e(n.prototype,new t),this.name=null!=r?r:this.constructor.name}return n.prototype.update=function(e){this.trigger("update",e)},n}()}),define("lyria/debug",function(){return!0}),define("lyria/constants",function(){return{animSpeed:300}}),define("lyria/language",["detectr","lyria/events"],function(e,t){var n={defaultLanguage:"en"},r=e.Browser.language()||n.defaultLanguage;return Object.defineProperty(n,"language",{get:function(){return r},set:function(e){r=e,t.trigger("language:change",r)},configurable:!0,enumarable:!0}),n}),function(){var e;return e=["ms","moz","webkit","o"],define("requestAnimationFrame",["root"],function(t){var n,r,i,o,a;if(n=0,r=t.requestAnimationFrame,!r)for(o=0,a=e.length;a>o&&(i=e[o],!(r=t[""+i+"RequestAnimationFrame"]));o++);return r||(r=function(e){var r,i,o;return r=Date.now(),o=Math.max(0,16-(r-n)),i=t.setTimeout(function(){return e(r+o)},o),n=r+o,i}),r}),define("cancelAnimationFrame",["root"],function(t){var n,r,i,o;if(n=t.cancelAnimationFrame,!n)for(i=0,o=e.length;o>i&&(r=e[i],!(n=t[""+r+"CancelAnimationFrame"]||t[""+r+"CancelRequestAnimationFrame"]));i++);return n||(n=function(e){return t.clearTimeout(e)}),n})}(),define("clamp",function(){var e=function(e,t,n){var r,i,o;return"object"==typeof e&&(r=e,t=r.min,n=r.max,e=r.value),Array.isArray(t)&&(i=t,t=i[0],n=i[1]),null==t&&(t=0),null==n&&(n=1),t>n&&(o=[n,t],t=o[0],n=o[1]),e>=t&&n>=e?e:e>n?n:t};return e}),define("clone",function(){var e=function(t){var n,r,i;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return n="",null!=t.global&&(n+="g"),null!=t.ignoreCase&&(n+="i"),null!=t.multiline&&(n+="m"),null!=t.sticky&&(n+="y"),RegExp(t.source,n);i=new t.constructor;for(r in t)i[r]=e(t[r]);return i};return e}),define("deleteitem",function(){var e=function(e,t){var n,r,i,o,a,s,c;if(Array.isArray(e)){for(c=[],o=a=0,s=e.length;s>a;o=++a)n=e[o],o!==t&&c.push(n);return c}i={};for(r in e)r!==t&&(i[r]=e[r]);return i};return e}),define("each",function(){return function(e,t){var n,r,i,o,a,s,c,u;if(Array.isArray(e)){if(0===e.length)return;for(r=a=0,c=e.length;c>a&&(n=e[r],t(r,n));r=++a);}else{if(i=Object.keys(e),0===i.length)return;for(r=s=0,u=i.length;u>s&&(n=i[r],o=e[n],t(n,o));r=++s);}return null}}),define("extend",["jquery"],function(e){return e.extend}),define("fisheryates",["random"],function(e){return function(t){for(var n=t.length-1;n>0;n--){var r=e(n+1),i=t[n];t[n]=t[r],t[r]=i}return t}}),define("isemptyobject",function(){return function(e){return"object"==typeof e?0===Object.keys(e).length:void 0}}),define("jqueryify",["jquery"],function(e){return function(t){return t instanceof e?t:e(t)}}),define("mixin",function(){var e;return e=function(){var e,t,n,r,i,o,a;if(r=arguments[0],n=arguments.length>=2?[].slice.call(arguments,1):[],r||n){for(o=0,a=n.length;a>o;o++){t=n[o];for(e in t)i=t[e],Object.hasOwnProperty.call(r,e)||(r[e]=i)}return null}}}),define("path",function(){var e="/",t={join:function(t){var n=function(){for(var e=[],n=0,r=t.length;r>n;n++)null!=t[n]&&""!==t[n]&&e.push(t[n]);return e}();return n.join(e)},resolve:function(n,r){Array.isArray(r)||(r=r.split(e));var i=n.split(e),o=[],a=i.concat(r),s=a.length-1;(".."===a[s]||"."===a[s])&&(a[s]="");for(var c=0,u=a.length;u>c;c++)if(null!=a[c]&&""!==a[c]){if("."===a[c])continue;if(".."===a[c+1]){a[c]="",a[c+1]="";continue}o.push(a[c])}return t.join(o)},dotToPath:function(e){return e?~e.indexOf(".")?t.join(e.split(".")):e:void 0}};return t}),define("random",function(){return function(e,t){return null==e&&(e=1),null==t&&(t=0),Math.floor(Math.random()*(e-t))+t}}),function(e){define("root",function(){return e})}(this),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(e,t){var n=this[e],r=n,i=function(){return r},o=function(i){return n=r,r=t.call(this,e,n,i)};delete this[e]&&Object.defineProperty(this,e,{get:i,set:o,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(e){var t=this[e];delete this[e],this[e]=t}}),define("lyria/data/layer",function(){}),define("lyria/data/store",["lyria/eventmap"],function(e){var t={};new e;var n={has:function(){return t.hasOwnProperty("key")},get:function(e){return t[e]},set:function(e,n){t[e]=n}};return n}),define("lyria/eventmap",["root"],function(e){"use strict";var t=function(){function t(e){this.sender=e,this.events={},this.validEvents=[]}return t.prototype.serialize=function(){return JSON.stringify(this.events,function(e,t){return"function"==typeof t&&(t=""+t),t})},t.prototype.deserialize=function(e){this.events=JSON.parse(e,function(e,t){return 0===t.indexOf("function")&&(t=Function(t)()),t})},t.prototype.on=function(e,t){var n;if(t&&!(this.validEvents.length>0&&-1===this.validEvents.indexOf(e)))return n={event:t,id:-1,type:"",sender:this.sender},this.events[e]?this.events[e].push(n):this.events[e]=[n],this},t.prototype.off=function(t){var n;if(t)return n=this.events[t].type,("once"===n||"repeat"===n)&&("repeat"===n&&e.clearInterval(this.events[t].id),"once"===n&&e.clearTimeout(this.events[t].id)),this.events[t]&&delete this.events[t],this},t.prototype.trigger=function(){var t,n,r,i,o,a,s,c,u,l,f,p,h,d;if(i=arguments[0],t=arguments.length>=2?[].slice.call(arguments,1):[],null!=i&&("object"==typeof i?(s=i.name,a=i.interval,c=i.repeat,n=i.context,r=i.delay):s=i,this.events[s])){for(null==a&&(a=0),null==c&&(c=!1),null==n&&(n=this),null==r&&(r=0),d=this.events[s],p=0,h=d.length;h>p;p++)o=d[p],f=function(){return o.sender?o.event.apply(n,[].concat.apply([],[[o.sender],t])):o.event.apply(n,t)},l=function(){return a?c?(o.type="repeat",o.id=e.setInterval(f,a)):(o.type="once",o.id=e.setTimeout(f,a)):(o.type="direct",f.call(this)),null},r?u=e.setTimeout(function(){return l.call(this),e.clearTimeout(u)}):l.call(this);return this}},t}();return t}),define("lyria/events",["lyria/eventmap"],function(e){var t=t||new e;return t}),define("lyria/game",["lyria/viewport","lyria/scene/director","lyria/preloader","lyria/loop"],function(e,t,n,r){"use strict";return function(){var i=function(){var r=this;this.viewport=new e,this.director=new t(this.viewport),this.preloader=new n,this.preloader.sceneDirector=this.director,i.Loop.addTask("update",function(e){r.director.trigger("update",e)})};return i.Loop=r,i}()}),define("lyria/gameobject",["mixin","isemptyobject","each","lyria/eventmap","lyria/component","lyria/log"],function(e,t,n,r,i,o){"use strict";return function(){var a=function(){e(a.prototype,new r);var i=this;this.components={},this.className="gameobject",this.template={},this.template.source='<div id="{{id}}" class="{{className}}"></div>',this.on("update",function(e){t(i.components)||n(i.components,function(t,n){n.trigger("update",e)})})};return a.prototype.refresh=function(e){null==e&&this.template&&(e=this.template.data),this.template&&this.template.source&&(this.content=this.template.source(e)),this.trigger("refresh")},a.prototype.add=function(e){e instanceof i&&(this.components[e.name]=e)},a.prototype.execute=function(e){e.apply(this,this)},a.prototype.log=function(e){o.i("GameObject: "+e)},a}()}),define("lyria/layer",["mixin","lyria/gameobject"],function(e,t){"use strict";return function(){var n=function(){e(this.prototype,new t)};return n}()}),define("lyria/localization/global",["lyria/localization","lyria/resource"],function(e,t){var n=n||new e(t.name("i18n.json"));return n}),define("lyria/localization",["check","jquery","lyria/language"],function(e,t,n){"use strict";return function(){var r=function(r,i){if(r){var o={},a={language:n};i=t.extend(!0,a,i);var s={};e(r,{object:function(e){s=e},string:function(e){t.ajax({url:e,async:!1,dataType:"json",success:function(e){s=e}})}}),o=s[i.language],o||(o=s.en),this.localizeLangObject=o}};return r.prototype.get=function(e,t){return this.localizeLangObject&&this.localizeLangObject[e]?this.localizeLangObject[e]:e||t?e?t?t:e:t:this.localizeLangObject},r}()}),define("lyria/log",["root"],function(e){"use strict";var t=function(){var t={};t.Connector=null,t.Plugins={},t.Plugins.Console={e:function(){return e.console&&e.console.error?e.console.error.apply(null,arguments):void 0},w:function(){return e.console&&e.console.warn?e.console.warn.apply(null,arguments):void 0},i:function(){return e.console&&e.console.info?e.console.info.apply(null,arguments):void 0},d:function(){return e.console&&e.console.log?e.console.log.apply(null,arguments):void 0},v:function(){return e.console&&e.console.log?e.console.log.apply(null,arguments):void 0}},t.Connector=t.Plugins.Console,t.logLevelMap={error:["e"],warn:["w","e"],info:["i","w","e"],debug:["d","i","w","e"],verbose:["v","d","i","w","e"]},t.logLevel="verbose";for(var n=["v","d","i","w","e"],r=0,i=n.length;i>r;r++)(function(e){t[e]=function(){t.logLevelMap[t.logLevel].indexOf(e)>=0&&t.Connector[e].apply(this,arguments)}})(n[r]);return t}();return e.log=e.out=t.i,t}),define("lyria/loop",["root","each","requestAnimationFrame"],function(e,t,n){"use strict";return function(){var e={},r=!0,i=function(){var i;(function o(){n(o);var a=Date.now(),s=a-(i||a);i=a,r&&t(e,function(e,t){t.paused||t.value(s)})})()},o=function(){r=!1},a=function(){e={}},s=function(t,n){e[t]={paused:!1,value:n}},c=function(t){e[t].paused=!0},u=function(t){e[t].paused=!1},l=function(t){delete e[t]};return{run:i,stop:o,clear:a,addTask:s,removeTask:l,pauseTask:c,resumeTask:u}}()}),define("lyria/math",["root","random","clamp","fisheryates"],function(e,t,n,r){var i={random:t,clamp:n,fisherYates:r};return i}),define("lyria/prefab",["extend","lyria/scene"],function(e,t){"use strict";return function(n,r){var i={target:null,template:"prefab.html",data:"prefab.js",path:"prefab",isPrefab:!0};return r=e(!0,i,r),new t(n,r)}}),define("lyria/prefab/manager",function(){var e={};return e.create=function(t){return e.precompiledPrefabs?e.precompiledPrefabs[t]:void 0},e}),define("lyria/preloader",["root","mixin","jquery","lyria/resource","lyria/log","lyria/eventmap"],function(e,t,n,r,i,o){"use strict";var a=function(){var a=function(e){t(a.prototype,new o),this.assets=null!=e?e:[],this.maxAssets=0,this.assetsLoaded=0,this.percentLoaded=0,this.steps=[]};return a.prototype.start=function(){function t(){var e=a/o;c.trigger("progresschange",e),s&&c.sceneDirector.currentScene.trigger("progresschange",e),a>=o&&(s&&c.sceneDirector.currentScene.trigger("complete"),c.trigger("complete"))}if(null!=this.assets&&0!==Object.keys(this.assets).length){this.trigger("start");var o=this.assets.totalSize,a=0;null==this.steps||0===this.steps.length;var s=null!=this.sceneDirector&&null!=this.loadingScene;s&&this.sceneDirector.show(this.loadingScene);var c=this;n.each(this.assets,function(o,s){if(null==s.files||!Array.isArray(s.files)||0===s.files.length)return!1;for(var c=0,u=s.files.length;u>c;c++)(function(o){if(o.name.indexOf("/"+r.path.image+"/")>=0){var s=new e.Image;s.onload=function(){a+=o.size,t()},s.onerror=function(){i.e("Error while loading "+o.name)},s.src=o.name}else n.ajax({url:o.name,dataType:"text"}).always(function(){a+=o.size,t()}).error(function(e){i.e("Error while loading "+o.name+": "+e)})})(s.files[c])})}},a}();return a}),define("lyria/resource",["path"],function(e){var t={path:{assets:"assets",audio:"audio",data:"data",image:"images",scene:"scenes",video:"video",prefab:"prefabs"},name:function(n,r){if(n){var i=t.path.assets,o=t.path[r]?t.path[r]:r;return e.resolve(i,[e.dotToPath(o),n])}}};return t}),define("lyria/scene/director",["root","mixin","jquery","lyria/eventmap","lyria/scene","lyria/viewport"],function(e,t,n,r,i,o){"use strict";return function(){function a(e,n){t(a.prototype,new r),this.viewport=e instanceof o?e:new o(e,n),this.sceneList={},this.currentScene=null}return a.prototype.sceneClassName="scene",a.prototype.add=function(t){if(!(t instanceof i)){if(!this.scenes||n.isEmptyObject(this.scenes))throw"No valid scene found.";t=this.scenes[t]}return t.parent=this,this.sceneList[t.name]=t,this.viewport.$element&&0===n("#"+t.name).length&&(this.viewport.$element.prepend(n(e.document.createElement("div")).attr("id",t.name).attr("class",a.prototype.sceneClassName)),t.async||t.content&&n("#"+t.name).html(t.content),t.events&&!n.isEmptyObject(t.events)&&n.each(t.events,function(e,r){"object"==typeof r&&"delegate"!==e&&n(t.events.delegate).on(r,e,{scene:t})}),t.template.data&&!n.isEmptyObject(t.template.data)&&n("#"+t.name+" [data-bind]").each(function(){var e=n(this),r=e.data("bind");t.template.data.watch(r,function(t,n,r){return n!==r&&e.html(r),r})})),this},a.prototype.show=function(e,t,r){this.trigger("scene:change",e),n("."+a.prototype.sceneClassName+":visible")&&n("."+a.prototype.sceneClassName).hide(),this.currentScene&&(this.currentScene.transition&&this.currentScene.length?n("#"+this.currentScene).hide(this.currentScene.transition.length,function(){n("."+a.prototype.sceneClassName).hide()}):n("."+a.prototype.sceneClassName).hide(),this.currentScene.trigger("deactivate",t));var i=this;n.each(this.sceneList,function(o,a){return o===e?(e.transition&&e.transition.length?n("#"+e).show(e.transition.length):n("#"+e).show(),i.currentScene=a,i.currentScene.trigger("active",t),r&&r(e),!1):void 0})},a.prototype.refresh=function(e){var t=e?this.sceneList[e]:this.currentScene;t.refresh(),t.content&&n("#"+t.name).html(t.content)},a.prototype.render=function(){this.currentScene.trigger("render")},a.prototype.update=function(e){this.currentScene.trigger("update",e)},a}()}),define("lyria/scene",["isemptyobject","each","extend","clone","mixin","lyria/eventmap","lyria/gameobject"],function(e,t,n,r,i,o,a){"use strict";var s=function(){var r=function(a,s,c,u){if(a){"function"==typeof s&&(u=c,c=s,s=[]),i(r.prototype,new o("scene:"+a));var l=this;this.name=a,this.async=!1,this.localization={},this.template={},this.template.source="",this.template.data={},this.children=this.children||{},this.children.gameObjects={},this.children.prefabs={},this.expose=function(t){t&&!e(t)&&(l.template.data=n(!0,l.template.data,t))};var f=function(n,r){null==r&&(r=[]),console.log(r),c.apply(l,[l,n].concat(r)),l.refresh(),l.events&&(l.events.delegate=u&&u.isPrefab?u.target?u.target:"body":"#"+a),l.on("update",function(n){t(l.children,function(r,i){e(i)||t(i,function(e,t){t.trigger("update",n)})})})};require(["lyria/achievements","lyria/log","lyria/component","lyria/gameobject","lyria/events","lyria/resource","lyria/data/store"],function(e,t,n,r,i,o,a){var c={Achievements:e,Log:t,Component:n,GameObject:r,Events:i,Resource:o,DataStore:a};s.length>0?require(s,function(){f(c,[].slice.call(arguments,0))}):f(c)})}};return r.prototype.add=function(e){var n=this;return e instanceof a?(this.children.gameObjects[e.name]=e,this.template.data.gameobject=function(){var e=[];return t(n.children.gameObjects,function(t,n){e.push(n)}),e}(),this.trigger("add"),!0):e instanceof a?(this.children.prefabs[e.name]=e,this.template.data.gameobject=function(){var e=[];return t(n.children.gameObjects,function(t,n){e.push(n)}),e}(),this.trigger("add"),!0):!1},r.prototype.refresh=function(e){null==e&&this.template&&(e=this.template.data),this.template&&this.template.source&&(this.content=this.template.source(e)),this.trigger("refresh")},r.prototype.event=function(e,t,n){return null!=e?null==t?this.events[e]:"function"!=typeof n?this.events[e][t]:(this.events[e]={},this.events[e][t]=n,void 0):void 0},r}();return s}),define("lyria/serialize",["jquery"],function(e){var t=function(t){return"object"!=typeof t||t instanceof e?void 0:JSON.stringify(t,function(t,n){return n instanceof e?null:("function"==typeof n&&(n=""+n),n)})};return t}),define("lyria/template/connector",["lyria/template/methods"],function(e){var t=function(){};return function(){for(var n=function(e){if("object"==typeof e){var t,n;for(t in e)n=e[t],"function"==typeof n&&(this[t]=n)}},r=0,i=e.length;i>r;r++)(function(e){n.prototype[e]=t})(e[r]);return n}()}),define("lyria/template/engine",["root","lyria/template/connector","lyria/template/methods"],function(e,t,n){var r=function(){},i=function(e){if(e instanceof t)for(var o=0,a=n.length;a>o;o++)(function(t){i[t]=null!=e[t]&&"function"==typeof e[t]?e[t]:r})(n[o])};if(e.Handlebars){var o=new t({compile:function(){return e.Handlebars.template.apply(this,arguments)}});i(o)}return i}),define("lyria/template/methods",function(){return["compile"]}),define("lyria/utils",["jquery"],function(){var e={};return e.isFile=function(e){var t=e.indexOf(".");if(-1===t)return!1;var n=e.length,r=n-t;return r>1&&5>=r?!0:!1},e}),define("lyria/video",function(){"use strict";return function(){var e=function(){};return e.prototype.loadFromFile=function(){},e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.stop=function(){},e}()}),define("lyria/viewport",["root","jquery","isemptyobject"],function(e,t,n){"use strict";return function(){function r(n,r){if(this.width=800,this.height=600,this.transforms={},null==n&&(n="viewport"),t("#"+n).length>0)this.$element=t("#"+n);else{var i=t(e.document.createElement("div")).attr("id",n).attr("class","viewport");r?t(r).prepend(i):t("body").prepend(i),this.$element=t("#"+n)}}return r.prototype.behaviour=function(){},r.prototype.resetTransforms=function(){this.transforms={}},r.prototype.updateTransforms=function(){n(this.transforms)||this.$element.css("transform",this.transforms.join(" "))},r.prototype.scale=function(e,t){null!=e&&(null==t&&(t=e),this.transforms.scale=this.transforms.scale||{},this.transforms.scale.x=e,this.transforms.scale.y=t,this.$element.css("transform",""))},r.prototype.origin=function(){},r.prototype.center=function(){},r.prototype.rotate=function(e){null!=e&&(this.transforms.rotate=e,this.$element.css("transform","rotate("+e+")"))},r}()});