/*! lyria - v0.2.0-beta1 - 15-08-2013 */
define("lyria/achievement",function(){var a=0,b=function(){var b=function(b){if(b.name){this.name=b.name,a++,this.id=a,null!=b.description&&(this.description=b.description),null!=b.icon&&(this.icon=b.icon),this.progress={},this.progress.max=1;var c=0,d=this;Object.defineProperty(this.progress,"current",{get:function(){return c},set:function(a){c=a,d.progress.max===progressCount&&d.unlock()},enumarable:!0,configurable:!0}),this.unlocked=!1}};return b.prototype.lock=function(){this.unlocked=!1},b.prototype.unlock=function(){this.unlocked=!0},b.prototype.toJSON=function(){var a={};for(var b in this)Object.hasOwnProperty.call(this,b)||(a[b]=this[b]);return a},b.prototype.toString=function(){return JSON.stringify(this.toJSON())},b}();return b}),define("lyria/achievement/manager",["root","jquery","lyria/achievement"],function(a,b,c){var d={},e={add:function(a){a instanceof c&&(d[a.name]=a)},remove:function(a){Object.hasOwnProperty.call(d,a)&&delete d[a]},list:function(){},show:function(){}};return e}),define("lyria/achievements",["root","jquery"],function(a,b){"use strict";var c=function(){var c,d={},e=function(b){c=b,a.localStorage&&a.localStorage[c]&&(d=JSON.parse(a.localStorage[c]))},f=function(a,b,c){d[a]={active:!1},"undefined"!=typeof b&&(d[a].description=b),"undefined"!=typeof c&&(d[a].icon=c)},g=function(){return Object.keys(d).length},h=function(){var a=0;for(var b in d)d[b].active&&a++;return a},i=function(){var a="";for(var b in d)a+=d[b].active?'<div class="ach_box unlocked"><span class="ach_unlocked">'+b+'</span><br /><span class="ach_details">'+d[b].description+"</span></div><br /><br />":'<div class="ach_box locked"><span class="ach_locked">'+b+'</span><br /><span class="ach_details">'+d[b].description+"</span></div><br /><br />";return a},j=function(e){"undefined"===d[e]&&f(e),d[e].active||(d[e].icon||b(".status.achievement").css("background-image","url("+d[e].icon+")"),b(".achievement .text").html(e),b(".status.achievement").css({opacity:0}).animate({opacity:1,bottom:"8px"},750).delay(2500).animate({opacity:0,bottom:"-80px"},750),d[e].active=!0),a.localStorage&&(a.localStorage[c]=JSON.stringify(d))};return{initialize:e,getCount:g,getUnlockedCount:h,list:i,register:f,show:j}}();return c}),define("lyria/audio",["root","jquery"],function(a,b){"use strict";var c=function(){var a=!1,c={},d=function(a,d){if(d&&"object"==typeof d){var e=document.createElement("audio");c[a]=d,b(e).attr("id",a).attr("preload","auto").append('<source src="'+d.filepath+'" />'),b("body").append(e),d.play&&this.play(a)}},e=function(a){a&&"string"==typeof fileObj&&(b("#"+a).remove(),window.log("Lyria.audio.removeAudioElement: "+a+" removed"))},f=function(d){c[d],b("#"+d).one("ended",{audioManager:this},function(a){window.chrome?b(this).load():b(this).currentTime=0;var c=b(this).attr("id"),d=a.data.audioManager.getSound(c);d.playAfter&&b("#"+d.playAfter).length>0&&a.data.audioManager.play(d.playAfter),d.loop&&a.data.audioManager.play(b(this).attr("id"))}),b("#"+d)[0].play(),a&&(b("#"+d)[0].volume=0)},g=function(a){return c[a]},h=function(a){b("#"+a).length>0?b("#"+a)[0].pause():window.log("error","Lyria.Audio.pause: cant finde element "+a+" to pause")},i=function(a){b("#"+a).length>0&&b("#"+a)[0]&&b("#"+a)[0].pause&&(b("#"+a)[0].pause(),b("#"+a)[0].currentTime=0)},j=function(a){return b("#"+a)[0].duration},k=function(a,c){return b("#"+a).length>0?"number"!=typeof c?b("#"+a)[0].volume:(b("#"+a)[0].volume=c,void 0):0},l=function(a,c){return"number"!=typeof c?b("#"+a)[0].currentTime:(b("#"+a)[0].currentTime=c,void 0)},m=function(a,b){switch(a){case"duration":case"length":return j();case"position":case"pos":if("undefined"==typeof b)return l();l(b);break;case"volume":if("undefined"==typeof b)return k();k(b)}},n=function(d){a=d;for(var e in c)c.hasOwnProperty(e)&&b("#"+e).length>0&&(b("#"+e)[0].volume=d?0:1)};return{addAudioElement:d,removeAudioElement:e,play:f,getSound:g,pause:h,stop:i,muteSounds:n,getLength:j,volume:k,pos:l,attr:m}};return c}),define("lyria/audio/manager",function(){var a={};return a}),define("lyria/component",["mixin","lyria/eventmap"],function(a,b){return function(){function c(d){a(c.prototype,new b),this.name=null!=d?d:this.constructor.name}return c.prototype.update=function(a){this.trigger("update",a)},c}()}),define("lyria/debug",function(){return!0}),define("lyria/constants",function(){return{animSpeed:300}}),define("lyria/language",["detectr","lyria/events"],function(a,b){var c={defaultLanguage:"en"},d=a.Browser.language()||c.defaultLanguage;return Object.defineProperty(c,"language",{get:function(){return d},set:function(a){d=a,b.trigger("language:change",d)},configurable:!0,enumarable:!0}),c}),function(){var a;a=["ms","moz","webkit","o"],define("requestanimationframe",["root"],function(b){var c,d,e,f,g;if(d=b.requestAnimationFrame,!d)for(f=0,g=a.length;g>f&&(e=a[f],!(d=b[""+e+"RequestAnimationFrame"]));f++);return d||(c=0,d=function(a){var d,e,f,g;return d=null!=(g=performance.now())?g:Date.now(),f=Math.max(0,16-(d-c)),e=b.setTimeout(function(){return a(d+f)},f),c=d+f,e}),d}),define("cancelanimationframe",["root"],function(b){var c,d,e,f;if(c=b.cancelAnimationFrame,!c)for(e=0,f=a.length;f>e&&(d=a[e],!(c=b[""+d+"CancelAnimationFrame"]||b[""+d+"CancelRequestAnimationFrame"]));e++);return c||(c=function(a){return b.clearTimeout(a)}),c})}.call(this),define("clamp",function(){var a=function(a,b,c){var d,e,f;return"object"==typeof a&&(d=a,b=d.min,c=d.max,a=d.value),Array.isArray(b)&&(e=b,b=e[0],c=e[1]),null==b&&(b=0),null==c&&(c=1),b>c&&(f=[c,b],b=f[0],c=f[1]),a>=b&&c>=a?a:a>c?c:b};return a}),define("clone",function(){var a=function(b){var c,d,e;if(null==b||"object"!=typeof b)return b;if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return c="",null!=b.global&&(c+="g"),null!=b.ignoreCase&&(c+="i"),null!=b.multiline&&(c+="m"),null!=b.sticky&&(c+="y"),new RegExp(b.source,c);e=new b.constructor;for(d in b)e[d]=a(b[d]);return e};return a}),define("deleteitem",function(){var a=function(a,b){var c,d,e,f,g,h,i;if(Array.isArray(a)){for(i=[],f=g=0,h=a.length;h>g;f=++g)c=a[f],f!==b&&i.push(c);return i}e={};for(d in a)d!==b&&(e[d]=a[d]);return e};return a}),define("each",function(){return function(a,b){var c,d,e,f,g,h,i,j;if(Array.isArray(a)){if(0===a.length)return;for(d=g=0,i=a.length;i>g&&(c=a[d],b(d,c));d=++g);}else{if(e=Object.keys(a),0===e.length)return;for(d=h=0,j=e.length;j>h&&(c=e[d],f=a[c],b(c,f));d=++h);}return null}}),define("extend",["jquery"],function(a){return a.extend}),define("fisheryates",["random"],function(a){return function(b){for(var c=b.length-1;c>0;c--){var d=a(c+1),e=b[c];b[c]=b[d],b[d]=e}return b}}),define("isemptyobject",function(){return function(a){return"object"==typeof a?0===Object.keys(a).length:void 0}}),define("jqueryify",["jquery"],function(a){return function(b){return b instanceof a?b:a(b)}}),define("mixin",function(){var a;return a=function(){var a,b,c,d,e,f,g;if(d=arguments[0],c=2<=arguments.length?[].slice.call(arguments,1):[],d||c){for(f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],Object.hasOwnProperty.call(d,a)||(d[a]=e)}return null}}}),define("nexttick",["requestanimationframe","cancelanimationframe"],function(a,b){return function(c){var d=a(function(){null!=c&&c(),b(d)})}}),define("path",function(){var a="/",b={join:function(b){var c=function(){for(var a=[],c=0,d=b.length;d>c;c++)null!=b[c]&&""!==b[c]&&a.push(b[c]);return a}();return c.join(a)},resolve:function(c,d){Array.isArray(d)||(d=d.split(a));var e=c.split(a),f=[],g=e.concat(d),h=g.length-1;(".."===g[h]||"."===g[h])&&(g[h]="");for(var i=0,j=g.length;j>i;i++)if(null!=g[i]&&""!==g[i]){if("."===g[i])continue;if(".."===g[i+1]){g[i]="",g[i+1]="";continue}f.push(g[i])}return b.join(f)},dotToPath:function(a){return a?~a.indexOf(".")?b.join(a.split(".")):a:void 0}};return b}),define("random",function(){return function(a,b){return null==a&&(a=1),null==b&&(b=0),Math.floor(Math.random()*(a-b))+b}}),function(a){define("root",function(){return a})}(this),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&Object.defineProperty(this,a,{get:e,set:f,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(a){var b=this[a];delete this[a],this[a]=b}}),define("lyria/data/layer",function(){}),define("lyria/data/store",["lyria/eventmap"],function(a){var b={};new a;var c={has:function(){return b.hasOwnProperty("key")},get:function(a){return b[a]},set:function(a,c){b[a]=c}};return c}),define("lyria/eventmap",["root"],function(a){"use strict";var b=function(){function b(a){this.sender=a,this.events={},this.validEvents=[]}return b.prototype.serialize=function(){var a,b;try{b=JSON.stringify(this.events,function(a,b){return"function"==typeof b&&(b=b.toString()),b})}catch(c){a=c,console.error("Error while serializing eventmap: "+a)}return b},b.prototype.deserialize=function(a){var b,c;try{c=JSON.parse(a,function(a,b){return 0===b.indexOf("function")&&(b=new Function(b)()),b})}catch(d){return b=d,console.error("Error while deserializing eventmap: "+b),!1}return this.events=c,!0},b.prototype.on=function(a,b){var c;if(b&&!(this.validEvents.length>0&&-1===this.validEvents.indexOf(a)))return c={event:b,id:-1,type:"",sender:this.sender},this.events[a]?this.events[a].push(c):this.events[a]=[c],this},b.prototype.off=function(b){var c;if(b)return c=this.events[b].type,("once"===c||"repeat"===c)&&("repeat"===c&&a.clearInterval(this.events[b].id),"once"===c&&a.clearTimeout(this.events[b].id)),this.events[b]&&delete this.events[b],this},b.prototype.clear=function(){return this.events={},this.validEvents=[],this},b.prototype.trigger=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(e=arguments[0],b=2<=arguments.length?[].slice.call(arguments,1):[],null!=e&&("object"==typeof e?(h=e.name,g=e.interval,i=e.repeat,c=e.context,d=e.delay):h=e,this.events[h])){for(null==g&&(g=0),null==i&&(i=!1),null==c&&(c=this),null==d&&(d=0),o=this.events[h],m=0,n=o.length;n>m;m++)f=o[m],l=function(){return f.sender?f.event.apply(c,[].concat.apply([],[[f.sender],b])):f.event.apply(c,b)},k=function(){return g?i?(f.type="repeat",f.id=a.setInterval(l,g)):(f.type="once",f.id=a.setTimeout(l,g)):(f.type="direct",l.call(this)),null},d?j=a.setTimeout(function(){return k.call(this),a.clearTimeout(j)}):k.call(this);return this}},b}();return b}),define("lyria/events",["lyria/eventmap"],function(a){var b=b||new a;return b}),define("lyria/game",["extend","lyria/viewport","lyria/scene/director","lyria/preloader","lyria/loop"],function(a,b,c,d,e){"use strict";return function(){var f=function(e){var g=this;e=a(e,{startLoop:!0}),this.viewport=new b,this.director=new c(this.viewport),this.preloader=new d,this.preloader.sceneDirector=this.director,f.Loop.on("update",function(a){g.director.trigger("update",a)}),e.startLoop&&f.Loop.run()};return f.Loop=e,f}()}),define("lyria/gameobject",["mixin","isemptyobject","each","lyria/eventmap","lyria/component","lyria/log"],function(a,b,c,d,e,f){"use strict";return function(){var g=function(){a(g.prototype,new d);var e=this;this.components={},this.className="gameobject",this.template={},this.template.source='<div id="{{id}}" class="{{className}}"></div>',this.on("update",function(a){b(e.components)||c(e.components,function(b,c){c.trigger("update",a)})})};return g.prototype.refresh=function(a){null==a&&this.template&&(a=this.template.data),this.template&&this.template.source&&(this.content=this.template.source(a)),this.trigger("refresh")},g.prototype.add=function(a){a instanceof e&&(this.components[a.name]=a)},g.prototype.execute=function(a){a.apply(this,this)},g.prototype.log=function(a){f.i("GameObject: "+a)},g}()}),define("lyria/layer",["mixin","lyria/gameobject"],function(a,b){"use strict";return function(){var c=function(){a(this.prototype,new b)};return c}()}),define("lyria/localization/global",["lyria/localization","lyria/resource"],function(a,b){var c=c||new a(b.name("i18n.json"));return c}),define("lyria/localization",["check","jquery","lyria/language"],function(a,b,c){"use strict";return function(){var d=function(d,e){if(d){var f={},g={language:c};e=b.extend(!0,g,e);var h={};a(d,{object:function(a){h=a},string:function(a){b.ajax({url:a,async:!1,dataType:"json",success:function(a){h=a}})}}),f=h[e.language],f||(f=h.en),this.localizeLangObject=f}};return d.prototype.get=function(a,b){return this.localizeLangObject&&this.localizeLangObject[a]?this.localizeLangObject[a]:a||b?a?b?b:a:b:this.localizeLangObject},d}()}),define("lyria/log",["root"],function(a){"use strict";var b=function(){var b={};b.Connector=null,b.Plugins={},b.Plugins.Console={e:function(){return a.console&&a.console.error?a.console.error.apply(console,arguments):void 0},w:function(){return a.console&&a.console.warn?a.console.warn.apply(console,arguments):void 0},i:function(){return a.console&&a.console.info?a.console.info.apply(console,arguments):void 0},d:function(){return a.console&&a.console.log?a.console.log.apply(console,arguments):void 0},v:function(){return a.console&&a.console.log?a.console.log.apply(console,arguments):void 0}},b.Connector=b.Plugins.Console,b.logLevelMap={error:["e"],warn:["w","e"],info:["i","w","e"],debug:["d","i","w","e"],verbose:["v","d","i","w","e"]},b.logLevel="verbose";for(var c=["v","d","i","w","e"],d=0,e=c.length;e>d;d++)!function(a){b[a]=function(){b.logLevelMap[b.logLevel].indexOf(a)>=0&&b.Connector[a].apply(this,arguments)}}(c[d]);return b}();return a.log=a.out=b.i,b}),define("lyria/loop",["root","requestanimationframe","lyria/eventmap"],function(a,b,c){"use strict";var d=new c,e={},f=a.performance;return f.now=f.now||function(){for(var a=["ms","moz","webkit","o"],b="",c=0,d=a.length;d>c;c++)if(b=a[c]+"Now",f[b])return f[b]},function(){var a=!0,c=function(){var c;!function g(){b(g);var h=f.now()||Date.now(),i=h-(c||h);if(c=h,a)for(var j=Object.keys(d.events),k=0,l=j.length;l>k;k++)!function(a){e[a]||d.trigger(a,i)}(j[k])}()},g=function(){a=!1},h=function(){d.clear(),e={}},i=function(a,b){d.on(a,b),e[a]=!1},j=function(a){d.off(a),null!=e[a]&&delete e[a]},k=function(a){e[a].paused=!0},l=function(b){return null==b?(a=!0,void 0):(e[b].paused=!1,void 0)};return{run:c,stop:g,clear:h,on:i,off:j,pause:k,resume:l}}()}),define("lyria/math",["root","random","clamp","fisheryates"],function(a,b,c,d){var e={random:b,clamp:c,fisherYates:d};return e}),define("lyria/prefab",["extend","lyria/scene"],function(a,b){"use strict";return function(c,d){var e={target:null,template:"prefab.html",data:"prefab.js",path:"prefab",isPrefab:!0};return d=a(!0,e,d),new b(c,d)}}),define("lyria/prefab/manager",function(){var a={};return a.create=function(b){return a.precompiledPrefabs?a.precompiledPrefabs[b]:void 0},a}),define("lyria/preloader",["root","mixin","jquery","lyria/resource","lyria/log","lyria/eventmap"],function(a,b,c,d,e,f){"use strict";var g=function(){var g=function(a){b(g.prototype,new f),this.assets=null!=a?a:[],this.maxAssets=0,this.assetsLoaded=0,this.percentLoaded=0,this.steps=[]};return g.prototype.start=function(){function b(){var a=g/f;i.trigger("progresschange",a),h&&i.sceneDirector.currentScene.trigger("progresschange",a),g>=f&&(h&&i.sceneDirector.currentScene.trigger("complete"),i.trigger("complete"))}if(null!=this.assets&&0!==Object.keys(this.assets).length){this.trigger("start");var f=this.assets.totalSize,g=0;null==this.steps||0===this.steps.length;var h=null!=this.sceneDirector&&null!=this.loadingScene;h&&this.sceneDirector.show(this.loadingScene);var i=this;c.each(this.assets,function(f,h){if(null==h.files||!Array.isArray(h.files)||0===h.files.length)return!1;for(var i=0,j=h.files.length;j>i;i++)!function(f){if(f.name.indexOf("/"+d.path.image+"/")>=0){var h=new a.Image;h.onload=function(){g+=f.size,b()},h.onerror=function(){e.e("Error while loading "+f.name)},h.src=f.name}else c.ajax({url:f.name,dataType:"text"}).always(function(){g+=f.size,b()}).error(function(a){e.e("Error while loading "+f.name+": "+a)})}(h.files[i])})}},g}();return g}),define("lyria/resource",["path"],function(a){var b={path:{assets:"assets",audio:"audio",data:"data",image:"images",scene:"scenes",video:"video",prefab:"prefabs"},name:function(c,d){if(c){var e=b.path.assets,f=b.path[d]?b.path[d]:d;return a.resolve(e,[a.dotToPath(f),c])}}};return b}),define("lyria/scene/director",["root","mixin","jquery","lyria/eventmap","lyria/scene","lyria/viewport"],function(a,b,c,d,e,f){"use strict";return function(){function g(a,c){b(g.prototype,new d),this.viewport=a instanceof f?a:new f(a,c),this.sceneList={},this.currentScene=null,this.on("render",function(){this.currentScene&&this.currentScene.trigger("render")}),this.on("update",function(a){this.currentScene&&this.currentScene.trigger("update",a)})}return g.prototype.sceneClassName="scene",g.prototype.add=function(b){if(!(b instanceof e)){if(!this.scenes||c.isEmptyObject(this.scenes))throw"No valid scene found.";b=this.scenes[b]}return b.parent=this,this.sceneList[b.name]=b,this.viewport.$element&&0===c("#"+b.name).length&&(this.viewport.$element.prepend(c(a.document.createElement("div")).attr("id",b.name).attr("class",g.prototype.sceneClassName)),b.isAsync||b.trigger("added")),this},g.prototype.show=function(a,b,d){this.trigger("scene:change",a),c("."+g.prototype.sceneClassName+":visible")&&c("."+g.prototype.sceneClassName).hide(),this.currentScene&&(this.currentScene.transition&&this.currentScene.length?c("#"+this.currentScene).hide(this.currentScene.transition.length,function(){c("."+g.prototype.sceneClassName).hide()}):c("."+g.prototype.sceneClassName).hide(),this.currentScene.trigger("deactivate",b));var e=this;c.each(this.sceneList,function(f,g){return f===a?(a.transition&&a.transition.length?c("#"+a).show(a.transition.length):c("#"+a).show(),e.currentScene=g,e.currentScene.trigger("active",b),d&&d(a),!1):void 0})},g.prototype.refresh=function(a){var b=a?this.sceneList[a]:this.currentScene;b.refresh()},g}()}),define("lyria/scene",["jquery","isemptyobject","each","extend","clone","mixin","nexttick","lyria/eventmap","lyria/gameobject","lyria/language","lyria/template/string","lyria/log"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=function(){var e=function(i,k,l,m){if(i){"function"==typeof k&&(m=l,l=k,k=[]),f(e.prototype,new h("scene:"+i));var n=this;this.name=i,this.async=!1,this.localization={},this.language=j.language,this.template={},this.template.source="",this.template.data={},this.children=this.children||{},this.children.gameObjects={},this.children.prefabs={},this.expose=function(a){a&&!b(a)&&(n.template.data=d(!0,n.template.data,a))},Object.defineProperty(n,"$element",{get:function(){return a("#"+n.name)}}),n.on("added",function(){n.refresh(),n.events&&(n.events.delegate=m&&m.isPrefab?m.target?m.target:"body":"#"+i),n.on("update",function(a){c(n.children,function(d,e){b(e)||c(e,function(b,c){c.trigger("update",a)})})}),n.events&&!a.isEmptyObject(n.events)&&a.each(n.events,function(b,c){"object"==typeof c&&"delegate"!==b&&a(n.events.delegate).on(c,b,{scene:n})}),n.template.data&&!a.isEmptyObject(n.template.data)&&a("#"+n.name+" [data-bind]").each(function(){var b=a(this),c=b.data("bind");n.template.data.watch(c,function(a,c,d){return c!==d&&b.html(d),d})})});var o=function(a,b){null==b&&(b=[]);var c=function(a){return a?console.error("Error while executing scene "+n.name+": "+a):(n.isAsync&&n.trigger("added"),void 0)},d=!1,e=n;e.async=function(){return d=!0,function(){g(function(){c()})}},Object.defineProperty(n,"isAsync",{get:function(){return d}});try{var f=l.apply(e,[e,a].concat(b));d||c(null,f)}catch(h){c(h)}};require(["lyria/achievements","lyria/log","lyria/component","lyria/gameobject","lyria/events","lyria/resource","lyria/data/store","lyria/loop"],function(a,b,c,d,e,f,g,h){var i={Achievements:a,Log:b,Component:c,GameObject:d,Events:e,Resource:f,DataStore:g,Loop:h};k.length>0?require(k,function(){o(i,[].slice.call(arguments,0))}):o(i)})}};return e.prototype.add=function(a){var b=this;return a instanceof i?(this.children.gameObjects[a.name]=a,this.template.data.gameobject=function(){var a=[];return c(b.children.gameObjects,function(b,c){a.push(c)}),a}(),this.trigger("add"),!0):a instanceof i?(this.children.prefabs[a.name]=a,this.template.data.gameobject=function(){var a=[];return c(b.children.gameObjects,function(b,c){a.push(c)}),a}(),this.trigger("add"),!0):!1},e.prototype.refresh=function(a){null==a&&this.template&&(a=this.template.data),this.template&&this.template.source&&(this.content=this.template.source(a)),this.$element.length>0&&this.$element.html(this.content),this.trigger("refresh")},e.prototype.event=function(a,b,c){return null!=a?null==b?this.events[a]:"function"!=typeof c?this.events[a][b]:(this.events[a]={},this.events[a][b]=c,void 0):void 0},e.prototype.i18n=function(a,b){return this.localization&&this.localization[this.language]?k.process(this.localization[this.language][a],b):void 0},e.prototype.log=function(a){l.i("Scene "+this.name+": "+a)},e}();return m}),define("lyria/serialize",["jquery"],function(a){var b=function(b){return"object"!=typeof b||b instanceof a?void 0:JSON.stringify(b,function(b,c){return c instanceof a?null:("function"==typeof c&&(c=c.toString()),c)})};return b}),define("lyria/template/connector",["lyria/template/methods"],function(a){var b=function(){};return function(){for(var c=function(a){if("object"==typeof a){var b,c;for(b in a)c=a[b],"function"==typeof c&&(this[b]=c)}},d=0,e=a.length;e>d;d++)!function(a){c.prototype[a]=b}(a[d]);return c}()}),define("lyria/template/engine",["root","lyria/template/connector","lyria/template/methods"],function(a,b,c){var d=function(){},e=function(a){if(a instanceof b)for(var f=0,g=c.length;g>f;f++)!function(b){e[b]=null!=a[b]&&"function"==typeof a[b]?a[b]:d}(c[f])};if(a.Handlebars){var f=new b({compile:function(){return a.Handlebars.template.apply(this,arguments)}});e(f)}return e}),define("lyria/template/methods",function(){return["compile"]}),define("lyria/template/string",function(){var a={key:{start:"{{",end:"}}"},process:function(b,c){if(null!=b){if("object"==typeof c)if(Array.isArray(c))for(var d=0,e=c.length;e>d;d++)b=b.replace(new RegExp(a.key.start+d+a.key.end),c[d]);else for(var f=Object.keys(c),g=0,h=f.length;h>g;g++)!function(c){b=b.replace(new RegExp(a.key.start+f[g]+a.key.end),c)}(c[f[g]]);return b}}};return a}),define("lyria/utils",["jquery"],function(){var a={};return a.isFile=function(a){var b=a.indexOf(".");if(-1===b)return!1;var c=a.length,d=c-b;return d>1&&5>=d?!0:!1},a}),define("lyria/video",function(){"use strict";return function(){var a=function(){};return a.prototype.loadFromFile=function(){},a.prototype.play=function(){},a.prototype.pause=function(){},a.prototype.stop=function(){},a}()}),define("lyria/viewport",["root","jquery","isemptyobject"],function(a,b,c){"use strict";return function(){function d(c,d){if(this.width=800,this.height=600,this.transforms={},null==c&&(c="viewport"),b("#"+c).length>0)this.$element=b("#"+c);else{var e=b(a.document.createElement("div")).attr("id",c).attr("class","viewport");d?b(d).prepend(e):b("body").prepend(e),this.$element=b("#"+c)}}return d.prototype.behaviour=function(){},d.prototype.resetTransforms=function(){this.transforms={}},d.prototype.updateTransforms=function(){c(this.transforms)||this.$element.css("transform",this.transforms.join(" "))},d.prototype.scale=function(a,b){null!=a&&(null==b&&(b=a),this.transforms.scale=this.transforms.scale||{},this.transforms.scale.x=a,this.transforms.scale.y=b,this.$element.css("transform",""))},d.prototype.origin=function(){},d.prototype.center=function(){},d.prototype.rotate=function(a){null!=a&&(this.transforms.rotate=a,this.$element.css("transform","rotate("+a+")"))},d}()});